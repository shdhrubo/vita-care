<section class="py-24 bg-white relative overflow-hidden">
  <!-- Decorative Blob -->
  <div
    class="absolute top-0 right-0 w-125 h-125 bg-primary/5 rounded-full blur-[100px] pointer-events-none translate-x-1/3 -translate-y-1/3"
  ></div>

  <div class="max-w-350 mx-auto px-4 relative z-10">
    <!-- Header and Controls -->
    <div class="flex flex-col md:flex-row justify-between items-end mb-16 gap-8">
      <div class="space-y-4 max-w-2xl animate-in fade-in slide-in-from-bottom-4 duration-700">
        <span
          class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-bold tracking-wider uppercase"
        >
          Testimonials
        </span>
        <h2 class="text-4xl md:text-5xl font-bold text-gray-900 tracking-tight">
          What Our Patients Say
        </h2>
        <p class="text-lg text-gray-500">
          Real stories from people who trust VitaCare for their health journey.
        </p>
      </div>

      <!-- Arrow Controls -->
      <div class="flex gap-3 animate-in fade-in slide-in-from-right-4 duration-700 delay-200">
        <button
          (click)="scroll('left')"
          class="w-12 h-12 rounded-full border border-gray-200 flex items-center justify-center text-gray-600 hover:bg-primary hover:border-primary hover:text-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-primary/50 group cursor-pointer"
          aria-label="Previous slide"
        >
          <mat-icon
            svgIcon="platform_solid:chevron-down"
            class="rotate-90 transition-transform group-hover:scale-110 group-active:scale-95"
          ></mat-icon>
        </button>
        <button
          (click)="scroll('right')"
          class="w-12 h-12 rounded-full border border-gray-200 flex items-center justify-center text-gray-600 hover:bg-primary hover:border-primary hover:text-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-primary/50 group cursor-pointer"
          aria-label="Next slide"
        >
          <mat-icon
            svgIcon="platform_solid:chevron-down"
            class="-rotate-90 transition-transform group-hover:scale-110 group-active:scale-95"
          ></mat-icon>
        </button>
      </div>
    </div>

    <!-- Slider Track -->
    <div
      #scrollContainer
      class="flex gap-6 overflow-x-auto snap-x snap-mandatory no-scrollbar pb-12 -mx-4 px-4 md:mx-0 md:px-0 scroll-smooth"
    >
      @for (item of testimonials; track $index) {
        <div class="snap-start shrink-0 w-full md:w-[calc(50%-12px)] lg:w-[calc(33.333%-16px)]">
          <div
            class="h-full bg-gray-50 rounded-3xl p-8 md:p-10 relative hover:-translate-y-2 transition-all duration-300 hover:shadow-xl hover:shadow-primary/5 border border-transparent hover:border-primary/10 group"
          >
            <!-- Quote Icon -->
            <div
              class="absolute top-8 right-8 text-primary/10 transition-colors group-hover:text-primary/20"
            >
              <mat-icon svgIcon="platform_solid:quote" class="w-12! h-12! text-[48px]!"></mat-icon>
            </div>

            <!-- Stars -->
            <div class="flex gap-1 mb-8">
              @for (star of [1, 2, 3, 4, 5]; track star) {
                @if (star <= item.rating) {
                  <div class="text-[#FFD700]">
                    <mat-icon svgIcon="platform_solid:star" class="w-5 h-5 fill-current"></mat-icon>
                  </div>
                }
              }
            </div>

            <!-- Content -->
            <blockquote
              class="text-lg text-gray-700 leading-relaxed mb-8 relative z-10 font-normal"
            >
              "{{ item.quote }}"
            </blockquote>

            <!-- Author -->
            <div class="flex items-center gap-4 mt-auto pt-8 border-t border-gray-100">
              <div class="relative">
                <div
                  class="w-16 h-16 rounded-full p-0.5 bg-white shadow-md ring-2 ring-white overflow-hidden shrink-0"
                >
                  <img
                    [src]="item.image"
                    [alt]="item.name"
                    class="w-full h-full object-cover object-center scale-110"
                  />
                </div>
                <div
                  class="absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center text-white border-2 border-white shadow-sm z-10"
                >
                  <mat-icon
                    svgIcon="platform_solid:quote"
                    class="w-3! h-3! text-[12px]!"
                  ></mat-icon>
                </div>
              </div>
              <div>
                <h4 class="font-bold text-gray-900 leading-tight">{{ item.name }}</h4>
                <p class="text-sm text-primary font-semibold tracking-wide uppercase mt-1">
                  {{ item.role }}
                </p>
              </div>
            </div>
          </div>
        </div>
      }
    </div>
  </div>
</section>
